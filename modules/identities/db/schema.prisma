// Do not modify this `datasource` block
datasource db {
	provider = "postgresql"
	url      = env("DATABASE_URL")
}

model UserIdentities {
    userId          String      @db.Uuid

	// Overarching identity type: email, sms, oauth, etc.
	identityType    String

	// Specific identity type
	// email:
	// - passwordless
	// - password
	// - etc.
	// oauth:
	// - google
	// - facebook
	// - etc.
	identityId      String

	// The data that is unique to this identity.
	// In the case of username, this would be the username.
	// In the case of email, this would be the email address.
	// In the case of oauth, this would be the oauth identity's "sub" field.
	uniqueData      Json

	// Additional data that is stored with the identity.
	// This can be used to store things like oauth tokens, last login time, etc.
	// Data here only needs to be handled by the specific identity provider.
	additionalData  Json

	@@id([userId, identityType, identityId])
	@@unique([identityType, identityId, uniqueData])
}
