// Do not modify this `datasource` block
datasource db {
	provider = "postgresql"
	url      = env("DATABASE_URL")
}

model Upload {
	id						String		@id @default(uuid()) @db.Uuid
	userId					String?		@db.Uuid

	bucket					String
	contentLength			BigInt

	createdAt				DateTime	@default(now())
	updatedAt				DateTime	@updatedAt
	completedAt				DateTime?
	deletedAt				DateTime?

	files					Files[]		@relation("Files")
}

model Files {
	path					String
	mime					String?
	contentLength			BigInt
	nsfwScoreThreshold		Float?

	uploadId				String		@db.Uuid
	upload					Upload		@relation("Files", fields: [uploadId], references: [id])

	@@id([uploadId, path])
}
